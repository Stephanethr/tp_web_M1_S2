<div class="item-edit-container">
    <h2>{{ isAddMode ? 'Add Item' : 'Edit Item' }}</h2>
  
    <div *ngIf="loading" class="text-center">
      <div class="spinner-border"></div>
      <p>Loading...</p>
    </div>
  
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>
  
    <form *ngIf="!loading" [formGroup]="itemForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Item Name</label>
        <input 
          type="text" 
          formControlName="name" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f['name'].errors }" 
        />
        <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
          <div *ngIf="f['name'].errors['required']">Item name is required</div>
          <div *ngIf="f['name'].errors['minlength']">Name must be at least 2 characters</div>
        </div>
      </div>
      
      <div class="form-group">
        <label for="typeId">Item Type</label>
        <select
          formControlName="typeId"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['typeId'].errors }"
        >
          <option value="" disabled>Select item type</option>
          <option *ngFor="let type of itemTypes" [value]="type.id">
            {{ type.typeName }}
          </option>
        </select>
        <div *ngIf="submitted && f['typeId'].errors" class="invalid-feedback">
          <div *ngIf="f['typeId'].errors['required']">Item type is required</div>
        </div>
      </div>
      
      <div class="form-group">
        <label for="quantity">Quantity</label>
        <input 
          type="number" 
          formControlName="quantity" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f['quantity'].errors }" 
        />
        <div *ngIf="submitted && f['quantity'].errors" class="invalid-feedback">
          <div *ngIf="f['quantity'].errors['required']">Quantity is required</div>
          <div *ngIf="f['quantity'].errors['min']">Quantity must be at least 1</div>
        </div>
      </div>
      
      <div class="form-group">
        <button [disabled]="loading" class="btn btn-primary">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          {{ isAddMode ? 'Add Item' : 'Save Changes' }}
        </button>
        <a routerLink="/inventory" class="btn btn-link">Cancel</a>
      </div>
    </form>
  </div>